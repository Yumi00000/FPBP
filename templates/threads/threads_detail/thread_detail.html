<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<form method="get">
    <input type="submit" value="Edit" name="edit">
    {% for context in thread %}
        <h1>{{ context.title }} | {{ context.author }} | {{ context.created }}</h1>
        {{ context.context }}
        {% if context.image %}
            {{ context.image }}
        {% endif %}
        {% if context.file %}
            {{ context.file }}
        {% endif %}
    {% endfor %}
</form>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://malsup.github.io/jquery.form.js"></script>
<script>
    $(document).ready(function () {
        $('#feedbackForm').submit(function (event) {
            event.preventDefault();
            var formData = $(this).serialize();
            formData += '&csrfmiddlewaretoken={{ csrf_token }}';
            $.ajax({
                type: 'POST',
                url: $(this).attr('action'),
                data: formData,
                success: function (response) {
                    $('#feedback-container').html(response.feedback_html);

                },
                error: function (xhr, status, error) {
                    console.error(error);
                }
            });
        });

    });
</script>
<form id="feedbackForm" action="/post-feedback/{{ thread_detail.id }}" method="POST">
    <div id="feedback-container">
        {% csrf_token %}
        {% include 'threads/threads_detail/answers.html' %}
    </div>
    <br>
</form>
</body>
</html>
